import java.util.Scanner;

public class Main extends JogadaUsuario {

    public static void main(String[] args) {
        Scanner entrada = new Scanner(System.in);
        JogadaUsuario jogada = new JogadaUsuario();
        Tabuleiro TabJogador = new Tabuleiro();
        Tabuleiro TabMaquina = new Tabuleiro();
        int pronto = 0;


      while(pronto != 3){


        
    
          do{
              System.out.println("Ahoy, capit√£o destemido! Bem-vindo aos mares ca√≥ticos e cheios de perigos de Sete Lagoas. Arregace as mangas, ajuste seu chap√©u de pirata e prepare-se para afundar inimigos enquanto risadas maliciosas ecoam pelas sete lagoas. A mar√© da divers√£o est√° prestes a virar a seu favor, ent√£o, suba a bordo e mostre quem √© o verdadeiro rei (ou rainha) da t√£o temida Lagoa Paulino! Arrr, que a sorte esteja ao seu lado, capit√£o intr√©pido! üè¥‚Äç‚ò†Ô∏èüåä\n \n");

             do{
            
              System.out.println("Voc√™ est√° pronto?");
              System.out.println("1 - Sim");
              System.out.println("2 - ¬øN√£o?");
              System.out.println("3 - Sair");
              pronto = entrada.nextInt();

               if(pronto < 1 || pronto > 3){
                 System.out.println("\nOp√ß√£o Invalida\n");
               }

             }while(pronto < 1 || pronto > 3);
            

              if(pronto==1){
                System.out.println("\nEnt√£o vamos come√ßar a pirataria...\n");
              }else if(pronto==2){
                System.out.println("\nEnt√£o leia nossa introdu√ß√£o novamente para se inspirar, marinheiro!\n \n");
              }else{
                System.out.println("\nSaindo...");
                
              }
            
              }while(pronto < 1 ||  pronto > 3 || pronto == 2);

        if(pronto == 3){
          break;
        }
      
        

        TabJogador.inicializarTabuleiro(TabJogador.tabuleiro);
        TabMaquina.inicializarTabuleiroMaq(TabMaquina.tabuleiroMaq);

        jogada.posicionarNaviosMaq(TabMaquina.tabuleiroMaq);
        jogada.posicionarNavios(TabJogador.tabuleiro, TabMaquina.tabuleiroMaq, entrada);

      

        jogada.jogarContraMaquina(TabMaquina.tabuleiroMaq, TabJogador.tabuleiro, entrada);
        

        entrada.close();
      }
    }
}














import java.util.Random;
import java.util.Scanner;


public class JogadaUsuario {
  
  
  Tabuleiro TabJogador = new Tabuleiro();
  Tabuleiro TabMaquina = new Tabuleiro();
  int contador = 0;
  int PartesAfundadas = 0;
  int PartesAfundadasMaq = 0;
  
  
  

  public void posicionarNaviosMaq(int[][]tabuleiroMaq) {

  Random random = new Random();

  for (int i = 0; i < 3; i++) {
      int linha, coluna;

      do {
          linha = random.nextInt(tabuleiroMaq.length);
          coluna = random.nextInt(tabuleiroMaq[0].length - 2); // Ajuste para garantir espa√ßo para um navio de tamanho 3

      } while (verificarPosicoesOcupadasMaq(tabuleiroMaq, linha, coluna, 3));

      for (int j = coluna; j < coluna + 3; j++) {
          tabuleiroMaq[linha][j] = 0; // '0' representa um navio
      }
  }

    }

  private static boolean verificarPosicoesOcupadasMaq(int[][] tabuleiroMaq, int linha, int coluna, int tamanho) {
      for (int j = coluna; j < coluna + tamanho; j++) {
          if (tabuleiroMaq[linha][j] != -1) {
              return true; // Alguma posi√ß√£o j√° est√° ocupada
          }
      }
      return false; // Todas as posi√ß√µes est√£o livres
  }

  public void posicionarNavios(int[][]tabuleiro, int[][]tabuleiroMaq, Scanner entrada) {

    TabJogador.exibirTabuleiro(tabuleiro);

    while(contador <9){
    System.out.print("\nDigite onde deseja posicionar o navio (ex: A1): ");
    String posicao = entrada.next().toUpperCase();

    if (posicao.length() != 2 || posicao.charAt(0) < 'A' || posicao.charAt(0) > 'G' || posicao.charAt(1) < '1' || posicao.charAt(1) > '7') {
        System.out.println("\nJogada inv√°lida! Tente novamente.");
        posicionarNavios(tabuleiro, tabuleiroMaq, entrada);
        return;
    }

    int linha = posicao.charAt(0) - 'A';
    int coluna = Character.getNumericValue(posicao.charAt(1)) - 1;


    tabuleiro[linha][coluna] = 0;
      TabJogador.exibirTabuleiro(tabuleiro);
      contador++;
    }
  }


  
    private static boolean verificarPosicoesOcupadas(int[][] tabuleiro, int linha, int coluna, int tamanho) {
        for (int j = coluna; j < coluna + tamanho; j++) {
            if (tabuleiro[linha][j] != -1) {
                return true; // Alguma posi√ß√£o j√° est√° ocupada
            }
        }
        return false; // Todas as posi√ß√µes est√£o livres
    }


  
    public void jogarContraMaquina(int[][] tabuleiro, int[][] tabuleiroMaq,  Scanner entrada) {
        int tentativasUsuario = 0;
        int tentativasMaquina = 0;
        

        do{
            // A Vez do usuario

          TabMaquina.exibirTabuleiroMaquina(tabuleiroMaq);
          
          TabJogador.exibirTabuleiro(tabuleiro);

            
          
            jogadaUsuario(tabuleiroMaq, entrada);
            tentativasUsuario++;

            // A vez da maquina
            jogadaMaquina(tabuleiro);
            tentativasMaquina++;

            
        }while(PartesAfundadas < 9 || PartesAfundadasMaq <9);{

          if(PartesAfundadas == 9){
          System.out.println("\nParab√©ns! Voc√™ afundou todos os navios da m√°quina em " + tentativasUsuario + " tentativas.");
          }if(PartesAfundadasMaq == 9){
            System.out.println("\nA m√°quina afundou todos os seus navios em " + tentativasMaquina + " tentativas.");
          }
        }
        
    }
  

    private void jogadaUsuario(int[][] tabuleiroMaq, Scanner entrada) {
        
        System.out.print("\nDigite a sua jogada (ex: A1): ");
        String jogada = entrada.next().toUpperCase();

        if (jogada.length() != 2 || jogada.charAt(0) < 'A' || jogada.charAt(0) > 'G' || jogada.charAt(1) < '1' || jogada.charAt(1) > '7') {
            System.out.println("\nJogada inv√°lida! Tente novamente.");
            jogadaUsuario(tabuleiroMaq, entrada);
            return;
        }

        int linha = jogada.charAt(0) - 'A';
        int coluna = Character.getNumericValue(jogada.charAt(1)) - 1;

        if (tabuleiroMaq[linha][coluna] == 0){
          PartesAfundadas++;
            System.out.println("\nParab√©ns! Voc√™ acertou um navio!");
            tabuleiroMaq[linha][coluna] = 2; // '2' representa um navio afundado

        } else if (tabuleiroMaq[linha][coluna] == 2) {
            System.out.println("\nVoc√™ j√° acertou esse navio. Tente outra posi√ß√£o.");
            jogadaUsuario(tabuleiroMaq, entrada);
        } else {
             tabuleiroMaq[linha][coluna] = 1;
            System.out.println("\n√Ågua. Tente novamente.");
        }
          
    }
    private void jogadaMaquina(int[][] tabuleiro) {
        Random random = new Random();
        int linha, coluna;
      

        do {
            linha = random.nextInt(tabuleiro.length);
            coluna = random.nextInt(tabuleiro[0].length);
        } while (tabuleiro[linha][coluna] == 1);

        System.out.println("\nA m√°quina fez a jogada: " + (char) ('A' + linha) + (coluna + 1));

        if (tabuleiro[linha][coluna] == 0) {
          PartesAfundadasMaq++;
            System.out.println("\nA m√°quina acertou um navio!");
           System.out.println("\n ACERTOS: " + PartesAfundadasMaq);
            tabuleiro[linha][coluna] = 2; // '2' representa um navio afundado
        } else if (tabuleiro[linha][coluna] == 2) {
          
        jogadaMaquina(tabuleiro);
        } else {
            tabuleiro[linha][coluna] = 1;
            System.out.println("\nA m√°quina errou.");
        }
        
    }
    
}












public class Tabuleiro{

int[][] tabuleiro = new int[7][7];
int[][] tabuleiroMaq = new int[7][7];

  public void inicializarTabuleiro(int[][] tabuleiro) {
      for (int i = 0; i < tabuleiro.length; i++) {
          for (int j = 0; j < tabuleiro[i].length; j++) {
              tabuleiro[i][j] = -1;
          }
      }
  }

  public void inicializarTabuleiroMaq(int[][] tabuleiroMaq) {
      for (int i = 0; i < tabuleiroMaq.length; i++) {
          for (int j = 0; j < tabuleiroMaq[i].length; j++) {
              tabuleiroMaq[i][j] = -1;
          }
      }
  }

  
  

  public void exibirTabuleiro(int[][] tabuleiro) {
      System.out.println("\n_______________________________\n");
      System.out.println("\n   SEU TABULEIRO\n");
      System.out.println("   1 2 3 4 5 6 7");
      System.out.println("  ______________");

      for (int i = 0; i < tabuleiro.length; i++) {
          char letra = (char) ('A' + i);
          System.out.print(letra + "|");

          for (int j = 0; j < tabuleiro[i].length; j++) {
              if (tabuleiro[i][j] == -1) {
                  System.out.print(" " + "~");
              } else if (tabuleiro[i][j] == 0) {
                  System.out.print(" " + "Œ¶");
              } else if (tabuleiro[i][j] == 1) {
                  System.out.print(" " + "x");
              } else if (tabuleiro[i][j] == 2) {
                  System.out.print(" " + "O");
              }
          }

          System.out.println();


      }

  }

  public void exibirTabuleiroMaquina(int[][] tabuleiroMaq) {
        System.out.println("\n_______________________________\n");
        System.out.println("\nTABULEIRO ADVERS√ÅRIO\n");
        System.out.println("   1 2 3 4 5 6 7");
        System.out.println("  ______________");

        for (int i = 0; i < tabuleiroMaq.length; i++) {
            char letra = (char) ('A' + i);
            System.out.print(letra + "|");

            for (int j = 0; j < tabuleiroMaq[i].length; j++) {
                if (tabuleiroMaq[i][j] == -1) {
                    System.out.print(" " + "~");
                } else if (tabuleiroMaq[i][j] == 0) {
                    System.out.print(" " + "i");
                } else if (tabuleiroMaq[i][j] == 1) {
                    System.out.print(" " + "x");
                } else if (tabuleiroMaq[i][j] == 2) {
                    System.out.print(" " + "O");
                }
            }

            System.out.println();


        }
      System.out.println("\n_______________________________\n");
    }

  }


